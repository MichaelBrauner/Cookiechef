!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Whisk={})}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function s(e,t){t=t.get(e);if(!t)throw new TypeError("attempted to get private field on non-instance");return t.get?t.get.call(e):t.value}function o(e,t,i){t=t.get(e);if(!t)throw new TypeError("attempted to set private field on non-instance");if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}return i}function a(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function r(t){return this.$cookies&&this.$cookies.find(function(e){return e.name===t})}function c(e){return!(!a(this,O,r).call(this,e)||!a(this,O,r).call(this,e).required)||(!!a(this,x,B).call(this,e)||!!a(this,E,F).call(this,e)&&a(this,T,z).call(this,e))}function h(t){var e=a(this,$,V).call(this,t),i=e&&e.cookies.find(function(e){return e.name===t});return!!e&&(!(!e.required&&!i.required)||(!!a(this,x,B).call(this,e.name)||!!this.isApproved(t)))}var u=function(){function e(){t(this,e)}return i(e,null,[{key:"set",value:function(e,t,i,n,s){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),document.cookie="".concat(e,"=").concat(t,";expires=").concat(o.toUTCString(),";path=/").concat(null!=s?s:"").concat(n?";samesite="+n:"")}},{key:"remove",value:function(e){var t=this;e instanceof Array?e.forEach(function(e){t.set(e,"",-1)}):this.set(e,"",-1)}},{key:"all",get:function(){var e={};if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].split("=");e[n[0].trim()]=n[1].trim()}return e}},{key:"get",value:function(e){return this.all[e]}},{key:"exists",value:function(e){return this.all().hasOwnProperty(e)}},{key:"hasValue",value:function(e,t){return!!this.exists(e)&&this.all()[e]==t}}]),e}(),l=function(){function e(){t(this,e)}return i(e,null,[{key:"encode",value:function(e){return void 0!==e&&encodeURIComponent(JSON.stringify(e))}},{key:"decode",value:function(e){return void 0!==e&&JSON.parse(decodeURIComponent(e))}}]),e}(),d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,k=new WeakMap,w=new WeakMap,m=new WeakMap,y=new WeakMap,S=new WeakMap,W=new WeakMap,g=new WeakSet,b=new WeakSet,_=new WeakSet,O=new WeakSet,A=new WeakSet,M=new WeakSet,$=new WeakSet,T=new WeakSet,x=new WeakSet,E=new WeakSet,J=new WeakSet,N=new WeakSet,C=new WeakSet,D=new WeakSet,j=new WeakSet,q=new WeakSet,P=new WeakSet,U=function(){function e(){t(this,e),P.add(this),q.add(this),j.add(this),D.add(this),C.add(this),N.add(this),J.add(this),E.add(this),x.add(this),T.add(this),$.add(this),M.add(this),A.add(this),O.add(this),_.add(this),b.add(this),g.add(this),d.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:"cookie-consent"}),v.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:""}),w.set(this,{writable:!0,value:"lax"}),m.set(this,{writable:!0,value:JSON.stringify([])}),y.set(this,{writable:!0,value:{consents_approved:[],consents_denied:[],accepted:!1}}),S.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),o(this,S,s(this,y)),this.$cookies=null}return i(e,[{key:"approve",value:function(t){var i=this;a(this,_,R).call(this),t instanceof Array?(s(this,S).consents_denied=s(this,S).consents_denied.filter(function(e){return!t.includes(e)}),t.forEach(function(e){i.isApproved(e)||s(i,S).consents_approved.push(e)})):(s(this,S).consents_denied=s(this,S).consents_denied.filter(function(e){return e!==t}),s(this,S).consents_approved.push(t)),a(this,D,Q).call(this)}},{key:"deny",value:function(t){var i=this;a(this,_,R).call(this),t instanceof Array?(s(this,S).consents_approved=s(this,S).consents_approved.filter(function(e){return!t.includes(e)}),t.forEach(function(e){i.isDenied(e)||s(i,S).consents_denied.push(e)})):(s(this,S).consents_approved=s(this,S).consents_approved.filter(function(e){return e!==t}),s(this,S).consents_denied.push(t)),u.remove(t),a(this,D,Q).call(this)}},{key:"approveGroup",value:function(e){a(this,_,R).call(this),this.approve(a(this,g,G).call(this,e))}},{key:"denyGroup",value:function(e){a(this,_,R).call(this),this.deny(a(this,g,G).call(this,e)),a(this,b,I).call(this,e)}},{key:"isApproved",value:function(e){return-1!==s(this,S).consents_approved.indexOf(e)}},{key:"isDenied",value:function(e){return-1!==s(this,S).consents_denied.indexOf(e)}},{key:"isStoreAccepted",value:function(){return s(this,S)&&s(this,S).accepted}},{key:"acceptStore",value:function(){a(this,_,R).call(this),s(this,S).accepted=!0,a(this,D,Q).call(this)}},{key:"refreshData",value:function(){return a(this,j,X).call(this),this.$cookies=a(this,P,Z).call(this),this.$cookies}},{key:"setCookie",value:function(e,t,i){if(!this.isApproved(e))return!1;u.set(e,t,i)}},{key:"settings",get:function(){return{domain:s(this,d),samesite:s(this,f),secure:s(this,v),defaultCookies:s(this,W)}}},{key:"init",value:function(e){var t;e?(o(this,d,null!==(t=e.domain)&&void 0!==t?t:window.location.origin),o(this,f,null!==(t=e.sameSite)&&void 0!==t?t:s(this,w)),o(this,v,null!==(t=e.secure)&&void 0!==t?t:s(this,k)),e=null!==(e=e.data)&&void 0!==e?e:s(this,m),o(this,W,JSON.parse(e)),this.$cookies=JSON.parse(e)):a(this,C,L).call(this),a(this,q,Y).call(this)}}]),e}(),G=function(t){return this.$cookies.find(function(e){return e.name===t}).cookies.map(function(e){return e.name})},I=function(e){u.remove(a(this,g,G).call(this,e))},R=function(){return!s(this,S)&&(o(this,S,s(this,y)),a(this,D,Q).call(this),s(this,S))},V=function(t){return this.$cookies&&this.$cookies.find(function(e){return e.cookies.find(function(e){return e.name===t})})},z=function(t){return s(this,W).find(function(e){return e.name===t}).checked},B=function(e){return a(this,J,H).call(this,e)&&this.isStoreAccepted()||a(this,N,K).call(this,e)},F=function(e){var t=this;return a(this,O,r).call(this,e).cookies.some(function(e){if(t.isApproved(e.name)&&t.isDenied(e.name))return!1})},H=function(e){var t=this;return a(this,O,r).call(this,e)&&!a(this,O,r).call(this,e).cookies.some(function(e){if(t.isDenied(e.name))return!0})},K=function(e){var t=this,e=a(this,O,r).call(this,e);return e&&e.cookies.length&&e.cookies.every(function(e){return t.isApproved(e.name)})},L=function(){o(this,d,window.location.origin),o(this,f,s(this,w)),o(this,v,s(this,k)),o(this,W,JSON.parse(s(this,m))),this.$cookies=JSON.parse(s(this,m))},Q=function(){u.set(s(this,p),l.encode(s(this,S)),1,s(this,f),s(this,v))},X=function(){var e=l.decode(u.get(s(this,p)));e?o(this,S,e):a(this,_,R).call(this)},Y=function(){return a(this,j,X).call(this),this.$cookies=a(this,P,Z).call(this),s(this,W)},Z=function(){var t=this;return s(this,W).map(function(e){return e.checked=a(t,A,c).call(t,e.name),e.cookies.map(function(e){e.checked=a(t,M,h).call(t,e.name)}),e})};e.Whisk=U,Object.defineProperty(e,"__esModule",{value:!0})});
