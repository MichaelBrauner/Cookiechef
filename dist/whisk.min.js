!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("regenerator-runtime/runtime"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","regenerator-runtime/runtime","lodash"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Whisk={},0,e.lodash)}(this,function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function a(e,t){t=t.get(e);if(!t)throw new TypeError("attempted to get private field on non-instance");return t.get?t.get.call(e):t.value}function r(e,t,i){t=t.get(e);if(!t)throw new TypeError("attempted to set private field on non-instance");if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}return i}function c(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function h(t){return this.$cookies&&this.$cookies.find(function(e){return e.name===t})}function u(e){return!(!c(this,$,h).call(this,e)||!c(this,$,h).call(this,e).required)||(!!c(this,N,K).call(this,e)||!!c(this,C,L).call(this,e)&&c(this,J,H).call(this,e))}function l(t){var e=c(this,E,F).call(this,t),i=e&&e.cookies.find(function(e){return e.name===t});return!!e&&(!(!e.required&&!i.required)||(!!c(this,N,K).call(this,e.name)||!!this.isApproved(t)))}var d=function(){function e(){n(this,e)}return o(e,null,[{key:"set",value:function(e,t,i,n,s){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),document.cookie="".concat(e,"=").concat(t,";expires=").concat(o.toUTCString(),";path=/").concat(null!=s?s:"").concat(n?";samesite="+n:"")}},{key:"remove",value:function(e){var t=this;e instanceof Array?e.forEach(function(e){t.set(e,"",-1)}):this.set(e,"",-1)}},{key:"all",get:function(){var e={};if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].split("=");e[n[0].trim()]=n[1].trim()}return e}},{key:"get",value:function(e){return this.all[e]}},{key:"exists",value:function(e){return this.all().hasOwnProperty(e)}},{key:"hasValue",value:function(e,t){return!!this.exists(e)&&this.all()[e]==t}}]),e}(),f=function(){function e(){n(this,e)}return o(e,null,[{key:"encode",value:function(e){return void 0!==e&&encodeURIComponent(JSON.stringify(e))}},{key:"decode",value:function(e){return void 0!==e&&JSON.parse(decodeURIComponent(e))}}]),e}(),p=new WeakMap,v=new WeakMap,k=new WeakMap,w=new WeakMap,m=new WeakMap,y=new WeakMap,W=new WeakMap,S=new WeakMap,g=new WeakMap,b=new WeakMap,_=new WeakMap,M=new WeakSet,O=new WeakSet,A=new WeakSet,$=new WeakSet,T=new WeakSet,x=new WeakSet,E=new WeakSet,J=new WeakSet,N=new WeakSet,C=new WeakSet,D=new WeakSet,q=new WeakSet,j=new WeakSet,P=new WeakSet,U=new WeakSet,G=new WeakSet,I=new WeakSet,R=function(){function e(){n(this,e),I.add(this),G.add(this),U.add(this),P.add(this),j.add(this),q.add(this),D.add(this),C.add(this),N.add(this),J.add(this),E.add(this),x.add(this),T.add(this),$.add(this),A.add(this),O.add(this),M.add(this),p.set(this,{writable:!0,value:1}),v.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:"cookie-consent"}),m.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:""}),W.set(this,{writable:!0,value:"lax"}),S.set(this,{writable:!0,value:JSON.stringify([])}),g.set(this,{writable:!0,value:{consents_approved:[],consents_denied:[],accepted:!1}}),b.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),r(this,b,a(this,g)),this.$cookies=null}return o(e,[{key:"approve",value:function(t){var i=this;c(this,A,B).call(this),t instanceof Array?(a(this,b).consents_denied=a(this,b).consents_denied.filter(function(e){return!t.includes(e)}),t.forEach(function(e){i.isApproved(e)||a(i,b).consents_approved.push(e)})):(a(this,b).consents_denied=a(this,b).consents_denied.filter(function(e){return e!==t}),a(this,b).consents_approved.push(t)),c(this,P,Z).call(this)}},{key:"deny",value:function(t){var i=this;c(this,A,B).call(this),t instanceof Array?(a(this,b).consents_approved=a(this,b).consents_approved.filter(function(e){return!t.includes(e)}),t.forEach(function(e){i.isDenied(e)||a(i,b).consents_denied.push(e)})):(a(this,b).consents_approved=a(this,b).consents_approved.filter(function(e){return e!==t}),a(this,b).consents_denied.push(t)),d.remove(t),c(this,P,Z).call(this)}},{key:"approveGroup",value:function(e){c(this,A,B).call(this),this.approve(c(this,M,V).call(this,e))}},{key:"denyGroup",value:function(e){c(this,A,B).call(this),this.deny(c(this,M,V).call(this,e)),c(this,O,z).call(this,e)}},{key:"isApproved",value:function(e){return-1!==a(this,b).consents_approved.indexOf(e)}},{key:"isDenied",value:function(e){return-1!==a(this,b).consents_denied.indexOf(e)}},{key:"isStoreAccepted",value:function(){return a(this,b)&&a(this,b).accepted}},{key:"acceptStore",value:function(){c(this,A,B).call(this),a(this,b).accepted=!0,c(this,P,Z).call(this)}},{key:"refreshData",value:function(){return c(this,U,ee).call(this),this.$cookies=c(this,I,ie).call(this),this.$cookies}},{key:"setCookie",value:function(e,t,i){if(!this.isApproved(e))return!1;d.set(e,t,i)}},{key:"settings",get:function(){return{domain:a(this,v),samesite:a(this,k),secure:a(this,m),defaultCookies:a(this,_)}}},{key:"init",value:function(e){var t;e?(r(this,v,null!==(t=e.domain)&&void 0!==t?t:window.location.origin),r(this,k,null!==(t=e.sameSite)&&void 0!==t?t:a(this,W)),r(this,m,null!==(t=e.secure)&&void 0!==t?t:a(this,y)),e=null!==(e=e.data)&&void 0!==e?e:a(this,S),r(this,_,JSON.parse(e)),this.$cookies=JSON.parse(e)):c(this,j,Y).call(this),c(this,G,te).call(this)}}]),e}(),V=function(t){return this.$cookies.find(function(e){return e.name===t}).cookies.map(function(e){return e.name})},z=function(e){d.remove(c(this,M,V).call(this,e))},B=function(){return!a(this,b)&&(r(this,b,a(this,g)),c(this,P,Z).call(this),a(this,b))},F=function(t){return this.$cookies&&this.$cookies.find(function(e){return e.cookies.find(function(e){return e.name===t})})},H=function(t){return a(this,_).find(function(e){return e.name===t}).checked},K=function(e){return c(this,D,Q).call(this,e)&&this.isStoreAccepted()||c(this,q,X).call(this,e)},L=function(e){var t=this;return c(this,$,h).call(this,e).cookies.some(function(e){if(t.isApproved(e.name)&&t.isDenied(e.name))return!1})},Q=function(e){var t=this;return c(this,$,h).call(this,e)&&!c(this,$,h).call(this,e).cookies.some(function(e){if(t.isDenied(e.name))return!0})},X=function(e){var t=this,e=c(this,$,h).call(this,e);return e&&!i.isEmpty(e.cookies)&&e.cookies.every(function(e){return t.isApproved(e.name)})},Y=function(){r(this,v,window.location.origin),r(this,k,a(this,W)),r(this,m,a(this,y)),r(this,_,JSON.parse(a(this,S))),this.$cookies=JSON.parse(a(this,S))},Z=function(){d.set(a(this,w),f.encode(a(this,b)),1,a(this,k),a(this,m))},ee=function(){var e=f.decode(d.get(a(this,w)));e?r(this,b,e):c(this,A,B).call(this)},te=function(){return c(this,U,ee).call(this),this.$cookies=c(this,I,ie).call(this),a(this,_)},ie=function(){var t=this;return a(this,_).map(function(e){return e.checked=c(t,T,u).call(t,e.name),e.cookies.map(function(e){e.checked=c(t,x,l).call(t,e.name)}),e})};e.Whisk=R,Object.defineProperty(e,"__esModule",{value:!0})});
